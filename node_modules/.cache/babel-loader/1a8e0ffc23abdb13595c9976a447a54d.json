{"ast":null,"code":"import _classCallCheck from\"/Users/yizhao/http/react/frog_trend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yizhao/http/react/frog_trend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yizhao/http/react/frog_trend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yizhao/http/react/frog_trend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yizhao/http/react/frog_trend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/**\n *2020\n *yi\n *\n */import React,{useRef}from'react';import'./components/global';import'./App.css';import Tagbutton from\"./components/Tagbutton\";import TrendItem from\"./components/trendItem\";import closepng from\"./asset/close.png\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(dispatch,props){var _this;_classCallCheck(this,App);_this=_super.call(this,dispatch,props);_this.onRef=function(ref){_this.child=ref;};_this.state={initall:0,winW:'100%',winH:'100%',categoryblockH:0,treadData:[],themeData:[],category:['传感未来','大数据','环境为本','区块链','人工智能','生活方式','生物科技','未来机会','未来技术','虚拟现实','重置'],choosecategory:{'传感未来':0,'大数据':0,'环境为本':0,'区块链':0,'人工智能':0,'生活方式':0,'生物科技':0,'未来机会':0,'未来技术':0,'虚拟现实':0,'重置':0},tempchoose:[0,0,0,0,0,0,0,0,0,0,0],theme:['行','建筑','健康','教育','金融','其他','人机交互','人文艺术','设计','食','消费','信息安全','衣','医疗','以人为本','职场','自动化'],themeicon:['./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png'],showthemeData:[],showpopup:'hidden',popupalpha:0,popupheioght:'30%'};_this.handleresize=_this.handleresize.bind(_assertThisInitialized(_this));_this.settle_Data=_this.settle_Data.bind(_assertThisInitialized(_this));_this.click_event=_this.click_event.bind(_assertThisInitialized(_this));_this.closepopup=_this.closepopup.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var newcategoryblockH=document.getElementById(\"categoryview\");if(window.innerWidth<500){newcategoryblockH=newcategoryblockH.clientHeight;}else{newcategoryblockH=0;}this.setState({categoryblockH:newcategoryblockH});}},{key:\"handleresize\",value:function handleresize(){var _this2=this;var newcategoryblockH=document.getElementById(\"categoryview\");if(window.innerWidth<500){newcategoryblockH=newcategoryblockH.clientHeight;}else{newcategoryblockH=0;}this.setState({winW:window.innerWidth,winH:window.innerHeight,categoryblockH:newcategoryblockH},function(){_this2.settle_Data(_this2.state.tempchoose);});console.log(newcategoryblockH);}},{key:\"componentWillMount\",value:function componentWillMount(){var _this3=this;window.addEventListener('resize',this.handleresize);fetch('./trend.json',{method:\"GET\",headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(response){return response.json();})//Promise\n.then(function(data){_this3.setState({treadData:data.data,winW:window.innerWidth,winH:window.innerHeight},function(){_this3.settle_Data(_this3.state.tempchoose);});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}//close component\n},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener(\"resize\",this.handleresize);}//props update\n},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(){}},{key:\"settle_Data\",value:function settle_Data(tempchoose){var _this4=this;var item_w=this.state.winW*.7/4;var left_pos=(this.state.winW-(item_w+20)*4)/2;var newtempData=[];var item_top=60+this.state.categoryblockH;var item_left=left_pos;var i=1;var newthemeData=[];//Set theme icon\nthis.state.theme.map(function(item,key){if(key%4==0){i=1;item_top+=item_w+80;item_left=left_pos;}else{item_left=left_pos+i*(item_w+20);i+=1;}var newthemeicon={index:key,theme:item,left:item_left,top:item_top,width:item_w,visible:'visible'};newthemeData.push(newthemeicon);});//If checked trend button\nvar tempchoosetrend=[];for(var _i=0;_i<tempchoose.length;_i++){if(tempchoose[_i]==1){tempchoosetrend.push(this.state.category[_i]);}}if(tempchoosetrend.length>0){var temptheme=[];var k=0;i=0;item_top=50+this.state.categoryblockH;this.state.treadData.map(function(item,key){if(tempchoosetrend.includes(item.category)){temptheme.push(item.themeicon);}});temptheme=Array.from(new Set(temptheme));var newtempthemeData=this.state.themeData;this.state.theme.map(function(themeitem,key){if(temptheme.includes(themeitem)){if(k%4==0){i=1;item_top+=item_w+80;item_left=left_pos;}else{item_left=left_pos+i*(item_w+20);i+=1;}k+=1;newtempthemeData[key]={index:key,theme:themeitem,left:item_left,top:item_top,width:item_w,visible:'visible'};}else{newtempthemeData[key]={index:key,theme:themeitem,left:(_this4.state.winW-item_w)/2,top:_this4.state.winH,width:item_w,visible:'hidden'};}});this.setState({initall:0},function(){_this4.setState({themeData:newtempthemeData});});}else{this.setState({initall:1,themeData:newthemeData},function(){_this4.setState({themeData:newthemeData});});}}},{key:\"click_event\",value:function click_event(tag){var _this5=this;if(tag=='重置'){var renewtempchoose=[0,0,0,0,0,0,0,0,0,0,0];var _newchoosecat=this.state.choosecategory;for(var i=0;i<this.state.tempchoose.length;i++){if(this.state.tempchoose[i]==1){_newchoosecat[this.state.category[i]]=0;}}this.setState({tempchoose:renewtempchoose,choosecategory:_newchoosecat},function(){// console.log(newchoosecat)\n_this5.settle_Data(renewtempchoose);});return;}var newchoosecat=this.state.choosecategory;if(newchoosecat[tag]==1){newchoosecat[tag]=0;}else{newchoosecat[tag]=1;}this.setState({choosecategory:newchoosecat},function(){var newtempchoose=_this5.state.tempchoose;for(var _i2=0;_i2<_this5.state.category.length;_i2++){if(_this5.state.category[_i2]==tag){newtempchoose[_i2]==1?newtempchoose[_i2]=0:newtempchoose[_i2]=1;}}_this5.setState({tempchoose:newtempchoose},function(){//console.log(newtempchoose)\n_this5.settle_Data(newtempchoose);});});}},{key:\"item_click_event\",value:function item_click_event(picktheme){var _this6=this;var tempchoosetrend=[];var popupData=[];for(var i=0;i<this.state.tempchoose.length;i++){if(this.state.tempchoose[i]==1){tempchoosetrend.push(this.state.category[i]);}}this.state.treadData.map(function(item,key){if(tempchoosetrend.length>0){if(tempchoosetrend.includes(item.category)){if(item.themeicon==picktheme){popupData.push(item);}}}else{if(item.themeicon==picktheme){popupData.push(item);}}});//sort year 2015-2020\nvar sortpopupData=this.bubblesort(popupData);var newpopupheioght=sortpopupData.length*120;this.setState({showthemeData:sortpopupData,popupheioght:newpopupheioght},function(){// console.log(this.state.showthemeData)\n_this6.setState({showpopup:'visible',popupalpha:1});});}},{key:\"bubblesort\",value:function bubblesort(arr){var len=arr.length;for(var i=0;i<len;i++){for(var j=0;j<len-i-1;j++){if(arr[j].year>arr[j+1].year){var temp=arr[j];arr[j]=arr[j+1];arr[j+1]=temp;}}}return arr;}},{key:\"closepopup\",value:function closepopup(){this.setState({showpopup:'hidden',popupheioght:'5%',popupalpha:0});}},{key:\"render\",value:function render(){var _this7=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"contentView\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"viewbg\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',backgroundColor:'',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"Topheadline\",children:\"FROG TREND\"}),/*#__PURE__*/_jsx(\"div\",{className:\"Subheadline\",children:\"This is the subtitle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"Centerblock\",id:\"categoryview\",children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'60%',width:'auto',height:'audo',paddingBottom:10,backgroundColor:''},children:[/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'传感未来',checked:this.state.choosecategory['传感未来'],bgcolor:'#e6ffa1',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'大数据',checked:this.state.choosecategory['大数据'],bgcolor:'#ffcba1',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'环境为本',checked:this.state.choosecategory['环境为本'],bgcolor:'#ffd966',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'区块链',checked:this.state.choosecategory['区块链'],bgcolor:'#b5ffa1',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'人工智能',checked:this.state.choosecategory['人工智能'],bgcolor:'#a1ffc9',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'生活方式',checked:this.state.choosecategory['生活方式'],bgcolor:'#a1eeff',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'生物科技',checked:this.state.choosecategory['生物科技'],bgcolor:'#a1c2ff',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'未来机会',checked:this.state.choosecategory['未来机会'],bgcolor:'#c1ffd1',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'未来技术',checked:this.state.choosecategory['未来技术'],bgcolor:'#e3c1ff',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'虚拟现实',checked:this.state.choosecategory['虚拟现实'],bgcolor:'#f8ffc1',action:this.click_event}),/*#__PURE__*/_jsx(Tagbutton,{ButtonName:'重置',checked:this.state.choosecategory['重置'],bgcolor:'#fff1c1',action:this.click_event})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"Centerblock\",children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'80%',width:'80%',height:'audo',paddingBottom:0,backgroundColor:'#666'},children:this.state.themeData.map(function(item,key){return/*#__PURE__*/_jsx(TrendItem,{onRef:_this7.onRef,itemid:item.index,itemTitle:item.theme,action:_this7.item_click_event.bind(_this7),icon:_this7.state.themeicon[key],itemW:item.width,visible:item.visible,left:item.left,top:item.top},key);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupView\",style:{visibility:this.state.showpopup,transition:'0.15s ease-out all',opacity:this.state.popupalpha},children:[/*#__PURE__*/_jsx(\"div\",{className:\"popupViewbg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupcontent\",style:{transition:'0.35s ease-out all',height:this.state.popupheioght,maxHeight:'70%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'40px',textAlign:'right'},children:/*#__PURE__*/_jsx(\"img\",{src:closepng,width:'40vh',onClick:function onClick(){_this7.closepopup();}})}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollcontent\",children:this.state.showthemeData.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"Linerblock\",style:{paddingBottom:20,paddingTop:10},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Centerblock\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"themeyear\",children:item.year}),/*#__PURE__*/_jsx(\"div\",{className:\"themetext\",children:item.headline})]},key),/*#__PURE__*/_jsx(\"div\",{className:\"Centerblock\",style:{height:1}})]},key);})})]})]})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/yizhao/http/react/frog_trend2/src/App.js"],"names":["React","useRef","Tagbutton","TrendItem","closepng","App","dispatch","props","onRef","ref","child","state","initall","winW","winH","categoryblockH","treadData","themeData","category","choosecategory","tempchoose","theme","themeicon","showthemeData","showpopup","popupalpha","popupheioght","handleresize","bind","settle_Data","click_event","closepopup","newcategoryblockH","document","getElementById","window","innerWidth","clientHeight","setState","innerHeight","console","log","addEventListener","fetch","method","headers","then","response","json","data","removeEventListener","item_w","left_pos","newtempData","item_top","item_left","i","newthemeData","map","item","key","newthemeicon","index","left","top","width","visible","push","tempchoosetrend","length","temptheme","k","includes","Array","from","Set","newtempthemeData","themeitem","tag","renewtempchoose","newchoosecat","newtempchoose","picktheme","popupData","sortpopupData","bubblesort","newpopupheioght","arr","len","j","year","temp","position","backgroundColor","maxWidth","height","paddingBottom","item_click_event","visibility","transition","opacity","maxHeight","textAlign","paddingTop","headline","Component"],"mappings":"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","sourcesContent":["/**\n *2020\n *yi\n *\n */\n\n\nimport React, { useRef } from 'react';\nimport './components/global'\nimport './App.css';\nimport Tagbutton from \"./components/Tagbutton\";\nimport TrendItem from \"./components/trendItem\";\nimport closepng from \"./asset/close.png\"\n\nclass App extends React.Component {\n\n  constructor(dispatch,props){\n    super(dispatch,props)\n    this.state ={\n      initall:0,\n      winW:'100%',\n      winH:'100%',\n      categoryblockH:0,\n      treadData:[],\n      themeData:[],\n      category: ['传感未来','大数据','环境为本','区块链','人工智能','生活方式','生物科技','未来机会','未来技术','虚拟现实','重置'],\n      choosecategory:{'传感未来':0,'大数据':0,'环境为本':0,'区块链':0,'人工智能':0,'生活方式':0,'生物科技':0,'未来机会':0,'未来技术':0,'虚拟现实':0,'重置':0},\n      tempchoose:[0,0,0,0,0,0,0,0,0,0,0],\n      theme:['行','建筑','健康','教育','金融','其他','人机交互','人文艺术','设计','食','消费','信息安全','衣','医疗','以人为本','职场','自动化'],\n      themeicon:['./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png','./images/ai.png'],\n      showthemeData:[],\n      showpopup:'hidden',\n      popupalpha:0,\n      popupheioght:'30%',\n\n    }\n\n\n    this.handleresize =this.handleresize.bind(this)\n    this.settle_Data =this.settle_Data.bind(this)\n    this.click_event =this.click_event.bind(this)\n      this.closepopup =this.closepopup.bind(this)\n\n\n  }\n\n  componentDidMount() {\n      let newcategoryblockH = document.getElementById(\"categoryview\")\n      if(window.innerWidth<500){\n          newcategoryblockH=newcategoryblockH.clientHeight\n      }else {\n          newcategoryblockH=0\n      }\n      this.setState({\n          categoryblockH:newcategoryblockH,\n      })\n  }\n\n\n\n  handleresize(){\n      let newcategoryblockH = document.getElementById(\"categoryview\")\n\n      if(window.innerWidth<500){\n          newcategoryblockH=newcategoryblockH.clientHeight\n      }else {\n          newcategoryblockH=0\n      }\n\n    this.setState({\n      winW:window.innerWidth,\n      winH:window.innerHeight,\n      categoryblockH:newcategoryblockH,\n    },()=>{\n      this.settle_Data(this.state.tempchoose)\n    })\n     console.log(newcategoryblockH)\n  }\n\n  componentWillMount() {\n\n    window.addEventListener('resize', this.handleresize);\n\n\n\n      fetch('./trend.json', {\n         method: \"GET\",\n         headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n         },\n         })\n          .then(response => response.json())//Promise\n          .then(data => {\n\n            this.setState({\n              treadData: data.data,\n              winW:window.innerWidth,\n              winH:window.innerHeight,\n\n            },()=>{\n\n              this.settle_Data(this.state.tempchoose)\n\n\n            })\n\n\n        })\n\n\n\n  }\n\n\n  componentDidUpdate(){\n\n  }\n\n  //close component\n  componentWillUnmount(){\n    window.removeEventListener(\"resize\", this.handleresize)\n  }\n\n\n  //props update\n  componentWillReceiveProps(){\n\n  }\n\n  settle_Data(tempchoose){\n\n\n    let item_w = this.state.winW * .7 / 4\n    let left_pos = (this.state.winW - (item_w + 20) * 4) / 2\n    let newtempData = []\n    let item_top =  60+this.state.categoryblockH\n\n\n\n      let item_left = left_pos\n    let i = 1\n    let newthemeData=[]\n\n\n\n\n\n      //Set theme icon\n      this.state.theme.map((item, key) => {\n\n          if (key % 4 == 0) {\n              i = 1\n              item_top += item_w + 80\n              item_left = left_pos\n          } else {\n              item_left = left_pos + i * (item_w + 20)\n              i += 1\n          }\n\n          const newthemeicon = {\n              index: key,\n              theme: item,\n              left: item_left,\n              top: item_top,\n              width: item_w,\n              visible: 'visible',\n          }\n\n          newthemeData.push(newthemeicon)\n\n      })\n\n\n\n\n\n\n      //If checked trend button\n       let tempchoosetrend=[]\n\n       for(let i=0;i<tempchoose.length;i++){\n         if(tempchoose[i]==1){\n           tempchoosetrend.push(this.state.category[i])\n         }\n       }\n\n\n      if(tempchoosetrend.length>0) {\n\n        let temptheme=[]\n        let k=0\n            i=0\n            item_top=50+this.state.categoryblockH\n        this.state.treadData.map((item, key) => {\n           if(tempchoosetrend.includes(item.category)) {\n              temptheme.push(item.themeicon)\n           }\n        })\n\n          temptheme=Array.from(new Set(temptheme))\n\n          let newtempthemeData=this.state.themeData\n          this.state.theme.map((themeitem, key) => {\n              if (temptheme.includes(themeitem)) {\n\n                  if (k % 4 == 0) {\n                      i = 1\n                      item_top += item_w + 80\n                      item_left = left_pos\n                  } else {\n                      item_left = left_pos + i * (item_w + 20)\n                      i += 1\n                  }\n                  k += 1\n\n                  newtempthemeData[key]={\n                      index: key,\n                      theme: themeitem,\n                      left: item_left,\n                      top: item_top,\n                      width: item_w,\n                      visible: 'visible',\n                  }\n\n              }else{\n\n                  newtempthemeData[key]={\n                      index: key,\n                      theme: themeitem,\n                      left: (this.state.winW-item_w)/2,\n                      top: this.state.winH,\n                      width: item_w,\n                      visible: 'hidden',\n                  }\n\n              }\n\n          })\n\n\n           this.setState({\n               initall: 0,\n           },()=>{\n               this.setState({themeData:newtempthemeData})\n           })\n\n\n\n     }else{\n\n          this.setState({\n              initall: 1,\n              themeData:newthemeData,\n          },()=>{\n              this.setState({themeData:newthemeData})\n          })\n\n      }\n\n\n    }\n\n\n\n\n  click_event(tag){\n\n\n    if(tag=='重置'){\n       let renewtempchoose=[0,0,0,0,0,0,0,0,0,0,0]\n       let newchoosecat=this.state.choosecategory\n       for(var i=0;i<this.state.tempchoose.length;i++){\n         if(this.state.tempchoose[i]==1){\n           newchoosecat[this.state.category[i]]=0\n         }\n       }\n\n          this.setState({\n            tempchoose:renewtempchoose,\n            choosecategory:newchoosecat,\n          },()=>{\n           // console.log(newchoosecat)\n            this.settle_Data(renewtempchoose)\n\n          })\n\n\n\n      return\n    }\n\n    let newchoosecat=this.state.choosecategory\n\n    if(newchoosecat[tag]==1){\n      newchoosecat[tag]=0\n\n    }else{\n      newchoosecat[tag]=1\n    }\n\n\n    this.setState({\n      choosecategory:newchoosecat\n    },()=>{\n      let newtempchoose=this.state.tempchoose\n      for(let i=0;i<this.state.category.length;i++){\n        if(this.state.category[i]==tag){\n          (newtempchoose[i]==1)?(newtempchoose[i]=0):(newtempchoose[i]=1)\n\n        }\n      }\n\n      this.setState({\n        tempchoose:newtempchoose\n      },()=>{\n        //console.log(newtempchoose)\n        this.settle_Data(newtempchoose)\n\n      })\n\n\n\n    })\n\n\n  }\n\n\n  onRef = (ref) => {\n    this.child = ref\n  }\n\n\n  item_click_event(picktheme){\n\n\n      let tempchoosetrend=[]\n      let popupData=[]\n      for(let i=0;i<this.state.tempchoose.length;i++){\n          if(this.state.tempchoose[i]==1){\n              tempchoosetrend.push(this.state.category[i])\n          }\n      }\n\n\n          this.state.treadData.map((item, key) => {\n              if(tempchoosetrend.length>0) {\n                 if(tempchoosetrend.includes(item.category)) {\n                    if(item.themeicon==picktheme){\n                        popupData.push(item)\n                    }\n                 }\n              }else{\n                    if(item.themeicon==picktheme){\n                        popupData.push(item)\n                   }\n              }\n          })\n\n      //sort year 2015-2020\n      let sortpopupData=this.bubblesort(popupData)\n\n\n      let newpopupheioght=sortpopupData.length*120\n      this.setState({\n          showthemeData:sortpopupData,\n          popupheioght:newpopupheioght\n      },()=>{\n         // console.log(this.state.showthemeData)\n          this.setState({\n              showpopup:'visible',\n              popupalpha:1,\n          })\n\n\n      })\n\n\n  }\n\n    bubblesort(arr){\n        let len = arr.length;\n        for( let i = 0; i < len; i ++){\n            for( let j = 0; j < len - i - 1; j ++){\n                if(arr[j].year > arr[j + 1].year) {\n                    let temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n                }\n            }\n        }\n        return arr;\n    }\n\n\n\n    closepopup(){\n          this.setState({\n              showpopup:'hidden',\n              popupheioght:'5%',\n              popupalpha:0,\n          })\n\n    }\n\n\n\n  render(){\n\n\n    return(\n\n        <div  className='contentView' >\n\n          <div className='viewbg'>\n          </div>\n\n          <div style={{position:'absolute',backgroundColor:'',width:'100%'}}>\n          <div className='Topheadline'>\n            FROG TREND\n          </div>\n          <div className='Subheadline'>\n            This is the subtitle\n          </div>\n\n          <div className='Centerblock' id='categoryview'>\n            <div style={{maxWidth:'60%',width:'auto',height:'audo',paddingBottom:10,backgroundColor:''}}>\n\n              <Tagbutton ButtonName={'传感未来'} checked={this.state.choosecategory['传感未来']} bgcolor={'#e6ffa1'} action={this.click_event} />\n              <Tagbutton ButtonName={'大数据'} checked={this.state.choosecategory['大数据']} bgcolor={'#ffcba1'} action={this.click_event} />\n              <Tagbutton ButtonName={'环境为本'} checked={this.state.choosecategory['环境为本']} bgcolor={'#ffd966'} action={this.click_event} />\n              <Tagbutton ButtonName={'区块链'} checked={this.state.choosecategory['区块链']} bgcolor={'#b5ffa1'} action={this.click_event} />\n              <Tagbutton ButtonName={'人工智能'} checked={this.state.choosecategory['人工智能']} bgcolor={'#a1ffc9'} action={this.click_event} />\n              <Tagbutton ButtonName={'生活方式'} checked={this.state.choosecategory['生活方式']} bgcolor={'#a1eeff'} action={this.click_event} />\n              <Tagbutton ButtonName={'生物科技'} checked={this.state.choosecategory['生物科技']} bgcolor={'#a1c2ff'} action={this.click_event} />\n              <Tagbutton ButtonName={'未来机会'} checked={this.state.choosecategory['未来机会']} bgcolor={'#c1ffd1'} action={this.click_event} />\n              <Tagbutton ButtonName={'未来技术'} checked={this.state.choosecategory['未来技术']} bgcolor={'#e3c1ff'} action={this.click_event} />\n              <Tagbutton ButtonName={'虚拟现实'} checked={this.state.choosecategory['虚拟现实']} bgcolor={'#f8ffc1'} action={this.click_event} />\n              <Tagbutton ButtonName={'重置'} checked={this.state.choosecategory['重置']} bgcolor={'#fff1c1'} action={this.click_event} />\n\n\n\n            </div>\n          </div>\n\n          <div className='Centerblock'>\n            <div style={{maxWidth:'80%',width:'80%',height:'audo',paddingBottom:0,backgroundColor:'#666'}}>\n\n              {\n\n                this.state.themeData.map((item, key) => {\n\n\n                    return (\n\n                        <TrendItem  onRef={this.onRef}  key={key} itemid={item.index} itemTitle={item.theme} action={this.item_click_event.bind(this)} icon={this.state.themeicon[key]} itemW={item.width} visible={item.visible} left={item.left} top={item.top}/>\n                    )\n\n                })\n              }\n\n\n          </div>\n\n          </div>\n          </div>\n\n            <div className='popupView' style={{visibility:this.state.showpopup,transition:'0.15s ease-out all',opacity:this.state.popupalpha}}>\n                <div className='popupViewbg'>\n                </div>\n                <div className='popupcontent' style={{transition:'0.35s ease-out all',height:this.state.popupheioght,maxHeight:'70%'}}>\n                    <div style={{width:'100%',height:'40px',textAlign:'right'}}>\n                        <img src={closepng}    width={'40vh'} onClick={()=>{this.closepopup() }} />\n                    </div>\n                    <div className='scrollcontent' >\n\n                        {\n                            this.state.showthemeData.map((item, key) => {\n                                return(\n                                    <div key={key} className='Linerblock' style={{  paddingBottom:20,paddingTop:10}}>\n                                           <div key={key} className='Centerblock'  >\n\n                                                <div className='themeyear'>\n                                                 {item.year}\n                                                </div>\n                                                <div className='themetext'>\n                                                 {item.headline}\n                                                </div>\n\n                                           </div>\n\n                                            <div   className='Centerblock' style={{height:1}} >\n\n                                            </div>\n                                        </div>\n\n\n                                )\n                            })\n                        }\n\n\n\n                    </div>\n\n\n\n                </div>\n\n            </div>\n        </div>\n    )\n\n  }\n\n}\n\n\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}