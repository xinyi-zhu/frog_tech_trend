{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zuzu/Documents/frog_trend/src/App.js\";\n\n/**\n *2020\n *yi\n *\n */\nimport React, { useRef, Component } from 'react';\nimport './components/global';\nimport './App.css';\nimport Tagbutton from \"./components/Tagbutton\";\nimport TrendItem from \"./components/trendItem\";\nimport closepng from \"./asset/close.png\";\nimport titlepng from \"./asset/title.png\";\nconst rootRef = /*#__PURE__*/React.createRef();\n\nclass App extends React.Component {\n  constructor(dispatch, props) {\n    super(dispatch, props);\n\n    this.onKeyDown = e => {\n      switch (e.keyCode) {\n        case 70:\n          //回车事件\n          //alert(e.keyCode)\n          this.fullScreen();\n          break;\n      }\n    };\n\n    this.fullScreen = () => {\n      if (!this.state.isFullScreen) {\n        try {\n          rootRef.current.requestFullscreen();\n        } catch {\n          console.log('not support');\n        }\n      }\n    };\n\n    this.exitFullScreen = () => {\n      document.exitFullscreen();\n    };\n\n    this.onRef = ref => {\n      this.child = ref;\n    };\n\n    this.state = {\n      initall: 0,\n      winW: '100%',\n      winH: '100%',\n      categoryblockH: 0,\n      treadData: [],\n      themeData: [],\n      category: ['传感未来', '大数据', '环境为本', '区块链', '人工智能', '生活方式', '生物科技', '未来机会', '未来技术', '虚拟现实', '重置'],\n      choosecategory: {\n        '传感未来': 0,\n        '大数据': 0,\n        '环境为本': 0,\n        '区块链': 0,\n        '人工智能': 0,\n        '生活方式': 0,\n        '生物科技': 0,\n        '未来机会': 0,\n        '未来技术': 0,\n        '虚拟现实': 0,\n        '重置': 0\n      },\n      tempchoose: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n      // theme:['行','建筑','健康','教育','金融','其他','人机交互','人文艺术','设计','食','消费','信息安全','衣','医疗','以人为本','职场','自动化'],\n      // themeicon:['./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png'],\n      theme: ['出行', '建筑', '健康', '教育', '金融', '其他', '人机交互', '人文艺术', '设计', '食物', '消费', '信息安全', '服饰', '医疗', '以人为本', '职场', '自动化'],\n      themeicon: ['./images/icon1.png', './images/ai.png', './images/icon3.png', './images/icon4.png', './images/icon5.png', './images/icon6.png', './images/icon7.png', './images/icon8.png', './images/icon9.png', './images/icon10png', './images/icon11.png', './images/icon12.png', './images/icon13.png', './images/icon14.png', './images/icon15.png', './images/icon16.png', './images/icon17.png'],\n      svgicon: [],\n      showthemeData: [],\n      showpopup: 'hidden',\n      popupalpha: 0,\n      popupheioght: '30%',\n      isFullScreen: false,\n      contentTop: '100px'\n    };\n    this.handleresize = this.handleresize.bind(this);\n    this.settle_Data = this.settle_Data.bind(this);\n    this.click_event = this.click_event.bind(this);\n    this.closepopup = this.closepopup.bind(this);\n  }\n\n  componentDidMount() {\n    let newcategoryblockH = document.getElementById(\"categoryview\");\n\n    if (window.innerWidth < 500) {\n      newcategoryblockH = newcategoryblockH.clientHeight;\n    } else {\n      newcategoryblockH = 0;\n    }\n\n    let _contentTop = 100;\n    console.log(document.getElementById(\"categoryview\").clientHeight);\n    _contentTop = (window.innerHeight - 800) / 2;\n    this.setState({\n      categoryblockH: newcategoryblockH,\n      contentTop: _contentTop\n    });\n    document.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  handleresize() {\n    let newcategoryblockH = document.getElementById(\"categoryview\");\n\n    if (window.innerWidth < 500) {\n      newcategoryblockH = newcategoryblockH.clientHeight;\n    } else {\n      newcategoryblockH = 0;\n    }\n\n    this.setState({\n      winW: window.innerWidth,\n      winH: window.innerHeight,\n      categoryblockH: newcategoryblockH\n    }, () => {\n      this.settle_Data(this.state.tempchoose);\n    });\n    console.log(newcategoryblockH); // 全屏\n\n    if (document.fullscreenElement) {\n      this.setState({\n        isFullScreen: true\n      });\n    } // 不是全屏\n    else {\n        this.setState({\n          isFullScreen: false\n        });\n      }\n  }\n\n  componentWillMount() {\n    window.addEventListener('resize', this.handleresize);\n    fetch('./trend.json', {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    }).then(response => response.json()) //Promise\n    .then(data => {\n      this.setState({\n        treadData: data.data,\n        winW: window.innerWidth,\n        winH: window.innerHeight\n      }, () => {\n        this.settle_Data(this.state.tempchoose);\n      });\n    });\n  }\n\n  componentDidUpdate() {} //close component\n\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleresize);\n  } //props update\n\n\n  componentWillReceiveProps() {}\n\n  settle_Data(tempchoose) {\n    let show_item_num = 7;\n    let item_top_space = 120;\n    let item_w = 860 / show_item_num;\n    let left_pos = (this.state.winW - (item_w + 30) * show_item_num) / 2;\n    let newtempData = [];\n    let item_top = item_top_space + this.state.categoryblockH;\n    let item_left = left_pos;\n    let i = 1;\n    let newthemeData = []; //Set theme icon\n\n    this.state.theme.map((item, key) => {\n      if (key % show_item_num == 0) {\n        i = 1;\n        item_top += item_w + 60;\n        item_left = left_pos;\n      } else {\n        item_left = left_pos + i * (item_w + 40);\n        i += 1;\n      }\n\n      const newthemeicon = {\n        index: key,\n        theme: item,\n        left: item_left,\n        top: item_top,\n        width: item_w,\n        visible: 'visible'\n      };\n      newthemeData.push(newthemeicon);\n    }); //If checked trend button\n\n    let tempchoosetrend = [];\n\n    for (let i = 0; i < tempchoose.length; i++) {\n      if (tempchoose[i] == 1) {\n        tempchoosetrend.push(this.state.category[i]);\n      }\n    }\n\n    if (tempchoosetrend.length > 0) {\n      let temptheme = [];\n      let k = 0;\n      i = 0;\n      item_top = item_top_space + this.state.categoryblockH;\n      this.state.treadData.map((item, key) => {\n        if (tempchoosetrend.includes(item.category)) {\n          temptheme.push(item.themeicon);\n        }\n      });\n      temptheme = Array.from(new Set(temptheme));\n      if (temptheme.length < show_item_num) left_pos = (this.state.winW - (item_w + 20) * temptheme.length) / 2;\n      let newtempthemeData = this.state.themeData;\n      this.state.theme.map((themeitem, key) => {\n        if (temptheme.includes(themeitem)) {\n          if (k % show_item_num == 0) {\n            i = 1;\n            item_top += item_w + 60;\n            item_left = left_pos;\n          } else {\n            item_left = left_pos + i * (item_w + 40);\n            i += 1;\n          }\n\n          k += 1;\n          newtempthemeData[key] = {\n            index: key,\n            theme: themeitem,\n            left: item_left,\n            top: item_top,\n            width: item_w,\n            visible: 'visible'\n          };\n        } else {\n          newtempthemeData[key] = {\n            index: key,\n            theme: themeitem,\n            left: (this.state.winW - item_w) / 2,\n            top: this.state.winH,\n            width: item_w,\n            visible: 'hidden'\n          };\n        }\n      });\n      this.setState({\n        initall: 0\n      }, () => {\n        this.setState({\n          themeData: newtempthemeData\n        });\n      });\n    } else {\n      this.setState({\n        initall: 1,\n        themeData: newthemeData\n      }, () => {\n        this.setState({\n          themeData: newthemeData\n        });\n      });\n    }\n  }\n\n  click_event(tag) {\n    if (tag == '重置') {\n      let renewtempchoose = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      let newchoosecat = this.state.choosecategory;\n\n      for (var i = 0; i < this.state.tempchoose.length; i++) {\n        if (this.state.tempchoose[i] == 1) {\n          newchoosecat[this.state.category[i]] = 0;\n        }\n      }\n\n      this.setState({\n        tempchoose: renewtempchoose,\n        choosecategory: newchoosecat\n      }, () => {\n        // console.log(newchoosecat)\n        this.settle_Data(renewtempchoose);\n      });\n      return;\n    }\n\n    let newchoosecat = this.state.choosecategory;\n\n    if (newchoosecat[tag] == 1) {\n      newchoosecat[tag] = 0;\n    } else {\n      newchoosecat[tag] = 1;\n    }\n\n    this.setState({\n      choosecategory: newchoosecat\n    }, () => {\n      let newtempchoose = this.state.tempchoose;\n\n      for (let i = 0; i < this.state.category.length; i++) {\n        if (this.state.category[i] == tag) {\n          newtempchoose[i] == 1 ? newtempchoose[i] = 0 : newtempchoose[i] = 1;\n        }\n      }\n\n      this.setState({\n        tempchoose: newtempchoose\n      }, () => {\n        //console.log(newtempchoose)\n        this.settle_Data(newtempchoose);\n      });\n    });\n  }\n\n  item_click_event(picktheme) {\n    let tempchoosetrend = [];\n    let popupData = [];\n\n    for (let i = 0; i < this.state.tempchoose.length; i++) {\n      if (this.state.tempchoose[i] == 1) {\n        tempchoosetrend.push(this.state.category[i]);\n      }\n    }\n\n    this.state.treadData.map((item, key) => {\n      if (tempchoosetrend.length > 0) {\n        if (tempchoosetrend.includes(item.category)) {\n          if (item.themeicon == picktheme) {\n            item.displayyear = 'yes';\n            popupData.push(item);\n          }\n        }\n      } else {\n        if (item.themeicon == picktheme) {\n          item.displayyear = 'yes';\n          popupData.push(item);\n        }\n      }\n    }); //sort year 2015-2020\n\n    let sortpopupData = this.bubblesort(popupData);\n    console.log(sortpopupData.length);\n    let newpopupheioght = sortpopupData.length * 120;\n    if (window.innerWidth < 1000) newpopupheioght = sortpopupData.length * window.innerWidth / 2;\n    this.setState({\n      showthemeData: sortpopupData,\n      popupheioght: newpopupheioght\n    }, () => {\n      // console.log(this.state.showthemeData)\n      this.setState({\n        showpopup: 'visible',\n        popupalpha: 1\n      });\n    });\n  }\n\n  bubblesort(arr) {\n    let len = arr.length;\n\n    for (let i = 0; i < len; i++) {\n      for (let j = 0; j < len - i - 1; j++) {\n        if (arr[j].year > arr[j + 1].year) {\n          let temp = arr[j];\n          arr[j] = arr[j + 1];\n          arr[j + 1] = temp;\n        } else if (arr[j].year == arr[j + 1].year) {\n          arr[j + 1].displayyear += 'no';\n        }\n      }\n    }\n\n    return arr;\n  }\n\n  closepopup() {\n    this.setState({\n      showpopup: 'hidden',\n      popupheioght: '5%',\n      popupalpha: 0\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contentView\",\n      ref: rootRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"viewbg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          backgroundColor: '',\n          width: '100%',\n          top: this.state.contentTop\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Topheadline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Subheadline\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: titlepng,\n            width: '980'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Centerblock\",\n          id: \"categoryview\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxWidth: '80%',\n              width: '980px',\n              height: 'audo',\n              display: 'flex',\n              justifyContent: 'space-between',\n              paddingBottom: 0,\n              backgroundColor: ''\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '传感未来',\n              checked: this.state.choosecategory['传感未来'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '大数据',\n              checked: this.state.choosecategory['大数据'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '环境为本',\n              checked: this.state.choosecategory['环境为本'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '区块链',\n              checked: this.state.choosecategory['区块链'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '人工智能',\n              checked: this.state.choosecategory['人工智能'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '生活方式',\n              checked: this.state.choosecategory['生活方式'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '生物科技',\n              checked: this.state.choosecategory['生物科技'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '未来机会',\n              checked: this.state.choosecategory['未来机会'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '未来技术',\n              checked: this.state.choosecategory['未来技术'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tagbutton, {\n              ButtonName: '虚拟现实',\n              checked: this.state.choosecategory['虚拟现实'],\n              bgcolor: '#BFDDE2',\n              action: this.click_event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Centerblock\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxWidth: '80%',\n              width: '860',\n              height: 'audo',\n              paddingBottom: 0,\n              backgroundColor: '#666'\n            },\n            children: this.state.themeData.map((item, key) => {\n              return /*#__PURE__*/_jsxDEV(TrendItem, {\n                onRef: this.onRef,\n                itemid: item.index,\n                itemTitle: item.theme,\n                action: this.item_click_event.bind(this),\n                icon: this.state.themeicon[key],\n                itemW: item.width,\n                visible: item.visible,\n                left: item.left,\n                top: item.top\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popupView\",\n        style: {\n          visibility: this.state.showpopup,\n          transition: '0.15s ease-out all',\n          opacity: this.state.popupalpha\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popupViewbg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popupcontent\",\n          style: {\n            transition: '0.15s ease-out all',\n            height: this.state.popupheioght,\n            maxHeight: '70%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              height: '40px',\n              textAlign: 'right'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: closepng,\n              width: '40vh',\n              onClick: () => {\n                this.closepopup();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scrollcontent\",\n            children: this.state.showthemeData.map((item, key) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Linerblock\",\n                style: {\n                  paddingBottom: 20,\n                  paddingTop: 10\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Centerblock\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"themeyear\",\n                    children: item.displayyear == \"yes\" ? item.year : ''\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 565,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"themetext\",\n                    children: item.headline\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 569,\n                    columnNumber: 49\n                  }, this)]\n                }, key, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 44\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Centerblock\",\n                  style: {\n                    height: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 45\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resetbutton\",\n        children: /*#__PURE__*/_jsxDEV(Tagbutton, {\n          ButtonName: '重置',\n          checked: this.state.choosecategory['重置'],\n          bgcolor: '#fff1c1',\n          action: this.click_event\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/zuzu/Documents/frog_trend/src/App.js"],"names":["React","useRef","Component","Tagbutton","TrendItem","closepng","titlepng","rootRef","createRef","App","constructor","dispatch","props","onKeyDown","e","keyCode","fullScreen","state","isFullScreen","current","requestFullscreen","console","log","exitFullScreen","document","exitFullscreen","onRef","ref","child","initall","winW","winH","categoryblockH","treadData","themeData","category","choosecategory","tempchoose","theme","themeicon","svgicon","showthemeData","showpopup","popupalpha","popupheioght","contentTop","handleresize","bind","settle_Data","click_event","closepopup","componentDidMount","newcategoryblockH","getElementById","window","innerWidth","clientHeight","_contentTop","innerHeight","setState","addEventListener","fullscreenElement","componentWillMount","fetch","method","headers","then","response","json","data","componentDidUpdate","componentWillUnmount","removeEventListener","componentWillReceiveProps","show_item_num","item_top_space","item_w","left_pos","newtempData","item_top","item_left","i","newthemeData","map","item","key","newthemeicon","index","left","top","width","visible","push","tempchoosetrend","length","temptheme","k","includes","Array","from","Set","newtempthemeData","themeitem","tag","renewtempchoose","newchoosecat","newtempchoose","item_click_event","picktheme","popupData","displayyear","sortpopupData","bubblesort","newpopupheioght","arr","len","j","year","temp","render","position","backgroundColor","maxWidth","height","display","justifyContent","paddingBottom","visibility","transition","opacity","maxHeight","textAlign","paddingTop","headline"],"mappings":"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","sourcesContent":["/**\n *2020\n *yi\n *\n */\n\n\nimport React, { useRef,Component } from 'react';\nimport './components/global'\nimport './App.css';\nimport Tagbutton from \"./components/Tagbutton\";\nimport TrendItem from \"./components/trendItem\";\nimport closepng from \"./asset/close.png\"\nimport titlepng from \"./asset/title.png\"\n\nconst rootRef = React.createRef();\n\n\n\nclass App extends React.Component {\n\n  constructor(dispatch,props){\n    super(dispatch,props)\n    this.state ={\n      initall:0,\n      winW:'100%',\n      winH:'100%',\n      categoryblockH:0,\n      treadData:[],\n      themeData:[],\n      category: ['传感未来','大数据','环境为本','区块链','人工智能','生活方式','生物科技','未来机会','未来技术','虚拟现实','重置'],\n      choosecategory:{'传感未来':0,'大数据':0,'环境为本':0,'区块链':0,'人工智能':0,'生活方式':0,'生物科技':0,'未来机会':0,'未来技术':0,'虚拟现实':0,'重置':0},\n      tempchoose:[0,0,0,0,0,0,0,0,0,0,0],\n     // theme:['行','建筑','健康','教育','金融','其他','人机交互','人文艺术','设计','食','消费','信息安全','衣','医疗','以人为本','职场','自动化'],\n     // themeicon:['./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png','./images/ai3.png'],\n      theme:['出行','建筑','健康','教育','金融','其他','人机交互','人文艺术','设计','食物','消费','信息安全','服饰','医疗','以人为本','职场','自动化'],\n      themeicon:['./images/icon1.png','./images/ai.png','./images/icon3.png','./images/icon4.png','./images/icon5.png','./images/icon6.png','./images/icon7.png','./images/icon8.png','./images/icon9.png','./images/icon10png','./images/icon11.png','./images/icon12.png','./images/icon13.png','./images/icon14.png','./images/icon15.png','./images/icon16.png','./images/icon17.png'],\n      svgicon:[],\n      showthemeData:[],\n      showpopup:'hidden',\n      popupalpha:0,\n      popupheioght:'30%',\n      isFullScreen:false,\n        contentTop:'100px',\n\n    }\n\n\n    this.handleresize =this.handleresize.bind(this)\n    this.settle_Data =this.settle_Data.bind(this)\n    this.click_event =this.click_event.bind(this)\n      this.closepopup =this.closepopup.bind(this)\n\n\n\n  }\n\n  componentDidMount() {\n      let newcategoryblockH = document.getElementById(\"categoryview\")\n      if(window.innerWidth<500){\n          newcategoryblockH=newcategoryblockH.clientHeight\n      }else {\n          newcategoryblockH=0\n      }\n\n      let _contentTop=100\n\n      console.log(document.getElementById(\"categoryview\").clientHeight)\n\n     _contentTop=(window.innerHeight-800)/2\n      this.setState({\n          categoryblockH:newcategoryblockH,\n          contentTop:_contentTop,\n      })\n\n      document.addEventListener(\"keydown\", this.onKeyDown)\n\n\n  }\n\n    onKeyDown = (e) => {\n\n        switch( e.keyCode) {\n            case 70://回车事件\n                //alert(e.keyCode)\n                this.fullScreen()\n                break\n        }\n    }\n\n\n\n    fullScreen = () => {\n        if (!this.state.isFullScreen) {\n            try {\n                rootRef.current.requestFullscreen();\n            }catch{\n                console.log('not support')\n            }\n        }\n    }\n\n\n    exitFullScreen = () => {\n        document.exitFullscreen();\n    }\n\n\n\n  handleresize(){\n\n      let newcategoryblockH = document.getElementById(\"categoryview\")\n\n      if(window.innerWidth<500){\n          newcategoryblockH=newcategoryblockH.clientHeight\n      }else {\n          newcategoryblockH=0\n      }\n\n    this.setState({\n      winW:window.innerWidth,\n      winH:window.innerHeight,\n      categoryblockH:newcategoryblockH,\n    },()=>{\n      this.settle_Data(this.state.tempchoose)\n    })\n     console.log(newcategoryblockH)\n\n\n      // 全屏\n      if (document.fullscreenElement) {\n          this.setState({ isFullScreen: true });\n      }\n      // 不是全屏\n      else {\n          this.setState({ isFullScreen: false });\n      }\n\n\n  }\n\n  componentWillMount() {\n\n    window.addEventListener('resize', this.handleresize);\n\n\n\n\n\n\n\n      fetch('./trend.json', {\n         method: \"GET\",\n         headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n         },\n         })\n          .then(response => response.json())//Promise\n          .then(data => {\n\n            this.setState({\n              treadData: data.data,\n              winW:window.innerWidth,\n              winH:window.innerHeight,\n\n            },()=>{\n\n              this.settle_Data(this.state.tempchoose)\n\n            })\n\n\n        })\n\n\n\n  }\n\n\n  componentDidUpdate(){\n\n  }\n\n  //close component\n  componentWillUnmount(){\n    window.removeEventListener(\"resize\", this.handleresize)\n  }\n\n\n  //props update\n  componentWillReceiveProps(){\n\n  }\n\n  settle_Data(tempchoose){\n\n    let show_item_num=7\n    let item_top_space=120\n    let item_w = 860 / show_item_num\n    let left_pos = (this.state.winW - (item_w + 30) * show_item_num) / 2\n    let newtempData = []\n    let item_top =  item_top_space+this.state.categoryblockH\n\n\n\n      let item_left = left_pos\n    let i = 1\n    let newthemeData=[]\n\n\n\n\n\n      //Set theme icon\n      this.state.theme.map((item, key) => {\n\n          if (key % show_item_num == 0) {\n              i = 1\n              item_top += item_w + 60\n              item_left = left_pos\n          } else {\n              item_left = left_pos + i * (item_w + 40)\n              i += 1\n          }\n\n          const newthemeicon = {\n              index: key,\n              theme: item,\n              left: item_left,\n              top: item_top,\n              width: item_w,\n              visible: 'visible',\n          }\n\n          newthemeData.push(newthemeicon)\n\n      })\n\n\n\n\n\n\n      //If checked trend button\n       let tempchoosetrend=[]\n\n       for(let i=0;i<tempchoose.length;i++){\n         if(tempchoose[i]==1){\n           tempchoosetrend.push(this.state.category[i])\n         }\n       }\n\n\n      if(tempchoosetrend.length>0) {\n\n        let temptheme=[]\n        let k=0\n            i=0\n            item_top=item_top_space+this.state.categoryblockH\n\n\n        this.state.treadData.map((item, key) => {\n           if(tempchoosetrend.includes(item.category)) {\n              temptheme.push(item.themeicon)\n           }\n        })\n\n\n          temptheme=Array.from(new Set(temptheme))\n\n         if(temptheme.length<show_item_num)left_pos = (this.state.winW - (item_w + 20) * temptheme.length) / 2\n\n\n          let newtempthemeData=this.state.themeData\n          this.state.theme.map((themeitem, key) => {\n\n\n              if (temptheme.includes(themeitem)) {\n\n                  if (k % show_item_num == 0) {\n                      i = 1\n                      item_top += item_w + 60\n                      item_left = left_pos\n                  } else {\n                      item_left = left_pos + i * (item_w + 40)\n                      i += 1\n                  }\n                  k += 1\n\n                  newtempthemeData[key]={\n                      index: key,\n                      theme: themeitem,\n                      left: item_left,\n                      top: item_top,\n                      width: item_w,\n                      visible: 'visible',\n                  }\n\n              }else{\n\n                  newtempthemeData[key]={\n                      index: key,\n                      theme: themeitem,\n                      left: (this.state.winW-item_w)/2,\n                      top: this.state.winH,\n                      width: item_w,\n                      visible: 'hidden',\n                  }\n\n              }\n\n          })\n\n\n           this.setState({\n               initall: 0,\n           },()=>{\n               this.setState({themeData:newtempthemeData})\n           })\n\n\n\n     }else{\n\n          this.setState({\n              initall: 1,\n              themeData:newthemeData,\n          },()=>{\n              this.setState({themeData:newthemeData})\n          })\n\n      }\n\n\n    }\n\n\n\n\n  click_event(tag){\n\n\n    if(tag=='重置'){\n       let renewtempchoose=[0,0,0,0,0,0,0,0,0,0,0]\n       let newchoosecat=this.state.choosecategory\n       for(var i=0;i<this.state.tempchoose.length;i++){\n         if(this.state.tempchoose[i]==1){\n           newchoosecat[this.state.category[i]]=0\n         }\n       }\n\n          this.setState({\n            tempchoose:renewtempchoose,\n            choosecategory:newchoosecat,\n          },()=>{\n           // console.log(newchoosecat)\n            this.settle_Data(renewtempchoose)\n\n          })\n\n\n\n      return\n    }\n\n    let newchoosecat=this.state.choosecategory\n\n    if(newchoosecat[tag]==1){\n      newchoosecat[tag]=0\n\n    }else{\n      newchoosecat[tag]=1\n    }\n\n\n    this.setState({\n      choosecategory:newchoosecat\n    },()=>{\n      let newtempchoose=this.state.tempchoose\n      for(let i=0;i<this.state.category.length;i++){\n        if(this.state.category[i]==tag){\n          (newtempchoose[i]==1)?(newtempchoose[i]=0):(newtempchoose[i]=1)\n\n        }\n      }\n\n      this.setState({\n        tempchoose:newtempchoose\n      },()=>{\n        //console.log(newtempchoose)\n        this.settle_Data(newtempchoose)\n\n      })\n\n    })\n\n  }\n\n\n  onRef = (ref) => {\n    this.child = ref\n  }\n\n\n  item_click_event(picktheme){\n\n\n      let tempchoosetrend=[]\n      let popupData=[]\n      for(let i=0;i<this.state.tempchoose.length;i++){\n          if(this.state.tempchoose[i]==1){\n              tempchoosetrend.push(this.state.category[i])\n          }\n      }\n\n\n          this.state.treadData.map((item, key) => {\n              if(tempchoosetrend.length>0) {\n                 if(tempchoosetrend.includes(item.category)) {\n                    if(item.themeicon==picktheme){\n                        item.displayyear='yes'\n                        popupData.push(item)\n                    }\n                 }\n              }else{\n                    if(item.themeicon==picktheme){\n                        item.displayyear='yes'\n                        popupData.push(item)\n                   }\n              }\n          })\n\n      //sort year 2015-2020\n      let sortpopupData=this.bubblesort(popupData)\n\n      console.log(sortpopupData.length)\n      let newpopupheioght=sortpopupData.length*120\n      if(window.innerWidth<1000)newpopupheioght=sortpopupData.length*window.innerWidth/2\n\n      this.setState({\n          showthemeData:sortpopupData,\n          popupheioght:newpopupheioght\n      },()=>{\n         // console.log(this.state.showthemeData)\n          this.setState({\n              showpopup:'visible',\n              popupalpha:1,\n          })\n\n\n      })\n\n\n  }\n\n    bubblesort(arr){\n        let len = arr.length;\n        for( let i = 0; i < len; i ++){\n            for( let j = 0; j < len - i - 1; j ++){\n                if(arr[j].year > arr[j + 1].year) {\n                    let temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n\n                }else if(arr[j].year == arr[j + 1].year){\n\n                    arr[j + 1].displayyear +='no'\n\n                }\n            }\n        }\n        return arr;\n    }\n\n\n\n    closepopup(){\n          this.setState({\n              showpopup:'hidden',\n              popupheioght:'5%',\n              popupalpha:0,\n          })\n\n    }\n\n\n\n\n\n\n  render(){\n\n\n    return(\n\n        <div  className='contentView' ref={rootRef} >\n\n          <div className='viewbg'>\n          </div>\n\n          <div style={{position:'absolute',backgroundColor:'',width:'100%',top:this.state.contentTop}}>\n          <div className='Topheadline'>\n          </div>\n          <div className='Subheadline'>\n           <img src={titlepng}    width={'980'} />\n          </div>\n\n          <div className='Centerblock' id='categoryview'>\n            <div style={{maxWidth:'80%',width:'980px',height:'audo',display:'flex',justifyContent: 'space-between',paddingBottom:0,backgroundColor:''}}>\n\n              <Tagbutton ButtonName={'传感未来'} checked={this.state.choosecategory['传感未来']} bgcolor={'#BFDDE2'} action={this.click_event}/>\n              <Tagbutton ButtonName={'大数据'} checked={this.state.choosecategory['大数据']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'环境为本'} checked={this.state.choosecategory['环境为本']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'区块链'} checked={this.state.choosecategory['区块链']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'人工智能'} checked={this.state.choosecategory['人工智能']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'生活方式'} checked={this.state.choosecategory['生活方式']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'生物科技'} checked={this.state.choosecategory['生物科技']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'未来机会'} checked={this.state.choosecategory['未来机会']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'未来技术'} checked={this.state.choosecategory['未来技术']} bgcolor={'#BFDDE2'} action={this.click_event} />\n              <Tagbutton ButtonName={'虚拟现实'} checked={this.state.choosecategory['虚拟现实']} bgcolor={'#BFDDE2'} action={this.click_event} />\n\n\n\n            </div>\n          </div>\n\n          <div className='Centerblock'>\n            <div style={{maxWidth:'80%',width:'860',height:'audo',paddingBottom:0,backgroundColor:'#666'}}>\n\n              {\n\n                this.state.themeData.map((item, key) => {\n\n\n                    return (\n\n                        <TrendItem  onRef={this.onRef}  key={key} itemid={item.index} itemTitle={item.theme} action={this.item_click_event.bind(this)} icon={this.state.themeicon[key]} itemW={item.width} visible={item.visible} left={item.left} top={item.top}/>\n                    )\n\n                })\n              }\n\n\n          </div>\n\n          </div>\n          </div>\n\n            <div className='popupView' style={{visibility:this.state.showpopup,transition:'0.15s ease-out all',opacity:this.state.popupalpha}}>\n                <div className='popupViewbg'>\n                </div>\n                <div className='popupcontent' style={{transition:'0.15s ease-out all',height:this.state.popupheioght,maxHeight:'70%'}}>\n                    <div style={{width:'100%',height:'40px',textAlign:'right'}}>\n                        <img src={closepng}    width={'40vh'} onClick={()=>{this.closepopup() }} />\n                    </div>\n                    <div className='scrollcontent' >\n\n                        {\n                            this.state.showthemeData.map((item, key) => {\n                                return(\n                                    <div key={key} className='Linerblock' style={{  paddingBottom:20,paddingTop:10}}>\n                                           <div key={key} className='Centerblock'  >\n\n                                                <div className='themeyear'>\n\n                                                    {(item.displayyear==\"yes\")?(item.year):('')}\n                                                </div>\n                                                <div className='themetext'>\n                                                 {item.headline}\n                                                </div>\n\n                                           </div>\n\n                                            <div   className='Centerblock' style={{height:1}} >\n\n                                            </div>\n                                        </div>\n\n\n                                )\n                            })\n                        }\n\n\n\n                    </div>\n\n\n\n                </div>\n\n            </div>\n\n            <div className='resetbutton' >\n                <Tagbutton ButtonName={'重置'} checked={this.state.choosecategory['重置']} bgcolor={'#fff1c1'} action={this.click_event} />\n\n            </div>\n\n        </div>\n    )\n\n  }\n\n}\n\n\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}